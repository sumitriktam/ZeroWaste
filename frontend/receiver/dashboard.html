{%extends 'receiver/base.html' %}
<!--  -->
{%block title%}Dashboard{%endblock%}
<!--  -->
{%block extra_css_link%} {% load static %}
<link rel="stylesheet" href="{% static 'receiver/css/dashboard.css'%}" />
{% endblock %} {%block extra_css%}
<style>
  @import url("https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@100..900&display=swap");
  .navbar-brand {
    color: #1a1a1a;
    font-family: "Lexend Deca", sans-serif;
    font-weight: bold;
    font-size: 20px; /* Fixed missing unit (px) */
  }

  .nav-item {
    font-family: "Lexend Deca", sans-serif;
    font-weight: regular; /* Should be "regular", not "regular" */
    font-size: 16px; /* Fixed missing unit (px) */
    padding-left: 15px;
  }

  .navbar .container {
    padding: 10px 0; /* Adjust the padding as needed */
  }

  .navbar {
    position: sticky;
    top: 0;
    z-index: 3;
    background-color: #e9e9e9;
  }

  .navbar-nav {
    border-radius: 5px;
  }

  .dropdown {
    position: fixed;
    right: 0px;
  }

  .restaurant-card {
    display: flex;
    flex-direction: column;
    border-radius: 10px;
    padding: 10px;
    margin: 20px;
    width: 250px;
    height: 300px;
    overflow: hidden;
    cursor: pointer;
  }

  .restaurant-card img {
    width: 100%; /* Ensure the image fills the container */
    height: 53%; /* Maintain aspect ratio */
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
    transition: box-shadow 0.3s, transform 0.3s;
  }

  .restaurant-card .card-body {
    padding: 10px;
  }

  .restaurant-card h4,
  .restaurant-card p {
    margin: 0;
    font-size: 14px; /* Adjust font size as needed */
    white-space: normal; /* Allow wrapping */
  }

  .restaurant-card .card-body h4 {
    font-weight: bold; /* Make headings bold */
  }

  .restaurant-card:hover {
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    transform: scale(1.05);
  }

  .validation-message {
    text-align: center;
    background-color: #f7a9af;
    color: #721c24;
    border-radius: 5px;
    margin-bottom: 4px;
  }

  .message-list {
    display: inline-block;
  }

  .faq {
    font-size: 24px;
    font-weight: bold;
    color: #333;
    position: relative;
    left: 1%;
    top: 5%;
  }
  .outer-box {
    display: flex;
    flex-direction: column;
    width: 90%;
    position: relative;
    top: 128%;
    left: 2.5%;
    margin-top: 5%;
  }

  .inner-box {
    flex-grow: 1;
    border: 1px solid #ccc;
    border-radius: 8px;
    background-color: #d9d9d9;
    margin: 8px;
    overflow: hidden;
    transition: height 0.3s;
    height: 50px; /* Initial fixed height */
  }

  .expanded {
    height: auto !important;
  }

  .arrow {
    cursor: pointer;
    text-align: center;
    position: relative;
    left: 47%;
    top: 30%;
    font-size: 140%;
  }
  .questions {
    position: relative;
    top: -50%;
    left: 1%;
    font-family: "Inter", sans-serif;
    font-size: 120%;
    font-weight: 500;
    color: #1d710f;
  }
  .hidden-paragraph {
    display: none;
    padding: 5px;
    line-height: 1.8;
    position: relative;
    left: 0.5%;
    top: -10px;
  }

  .expanded .hidden-paragraph {
    display: block;
  }
  .expanded .questions {
    top: -20px;
  }
  .expanded .arrow {
    top: 20px;
    transform: rotate(180deg);
  }
</style>

{%endblock%} {%block body%} {% if messages %}
<div class="validation-message" id="validationMessage">
  <ul class="message-list">
    {% for message in messages %}
    <li>{{ message }}</li>
    {% endfor %}
  </ul>
</div>
{%endif%}
<div>
  <div class="dropdown">
    <a
      class="btn btn-secondary dropdown-toggle"
      style="background-color: #578b50"
      href="#"
      role="button"
      id="dropdownMenuLink"
      data-bs-toggle="dropdown"
      aria-expanded="false"
    >
      Categories
    </a>

    <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
      <li>
        <a class="dropdown-item" href="#" onclick="filterPosts('all')">All</a>
      </li>
      <li>
        <a class="dropdown-item" href="#" onclick="filterPosts('food')">Food</a>
      </li>
      <li>
        <a class="dropdown-item" href="#" onclick="filterPosts('clothes')"
          >Clothes</a
        >
      </li>
      <li>
        <a class="dropdown-item" href="#" onclick="filterPosts('toys')">Toys</a>
      </li>
      <li>
        <a class="dropdown-item" href="#" onclick="filterPosts('groceries')"
          >Groceries</a
        >
      </li>
      <li>
        <a class="dropdown-item" href="#" onclick="filterPosts('others')"
          >Others</a
        >
      </li>
    </ul>
  </div>
</div>

<div id="post-container">
  <div
    class="restaurant-cards"
    style="
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      margin-left: 5%;
    "
  >
    {% for post in data.posts %}
    <div class="restaurant-card" onclick="sendRequest('{{ post.post_id }}')">
      <img src="{{ post.image }}" alt="Item Image" />
      <div class="card-body">
        <h4>{{post.item_name}}</h4>
        <p>{{post.location}}</p>
        <p>{{post.drop_pickup}}</p>
      </div>
      <form
        id="form_{{post.post_id}}"
        action="{% url 'receiver:view_post' post_id=post.post_id %}"
        method="post"
      >
        {% csrf_token %}
      </form>
    </div>
    {% endfor %}
  </div>
</div>
{%endblock%} {%block extra_js%}

<script>
   <!-- js -->
   function sendRequest(postId) {
   const form=document.getElementById(`form_${postId}`); form.action =
   `/receiver/view_post/${postId}/`;
   document.getElementById("form_" +postId).submit();
  }
   function filterPosts(category){
   let all_posts = {{data.posts | safe }};
   filteredPosts=all_posts.filter((post)=>post.category===category)
   if(category==='all')filteredPosts=all_posts
   document.querySelector('.restaurant-cards').innerHTML=''
   if(filteredPosts.length===0)document.querySelector('.restaurant-cards').innerHTML="<h6>Sorry no posts available</h6>"
   filteredPosts.forEach(function(post) { let postElement =
   document.createElement('div'); postElement.className = 'restaurant-card';
   postElement.onclick = function() { sendRequest(post.post_id); };
   postElement.innerHTML = `
   <img src="${post.image}" alt="Item Image" />
   <div class="card-body">
     <h4>${post.item_name}</h4>
     <p>${post.location}</p>
     <p>${post.drop_pickup}</p>
   </div>
   <form id="form_${post.post_id}" action="" method="post">{% csrf_token %}</form>
   `; // Append the post container to "restaurent-cards" class
   document.querySelector('.restaurant-cards').appendChild(postElement); }); }
</script>
{%endblock%}
