{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <p>{{ data.message }}</p>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Leaflet Map</title>
    <!-- Include Leaflet CSS and JavaScript -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@100..900&display=swap");
    </style>
    <style>
      .navbar-brand {
        color: #1a1a1a;
        font-family: "Lexend Deca", sans-serif;
        font-weight: bold;
        font-size: 24;
      }
      .nav-item {
        font-family: "Lexend Deca", sans-serif;
        font-weight: regular;
        font-size: 24;
        padding-left: 15px;
      }
      .navbar .container {
        padding: 10px 0; /* Adjust the padding as needed */
      }
      .navbar {
        position: sticky;
        top: 0;
        z-index: 3;
        background-color: #e9e9e9;
      }
      .navbar-nav {
        border-radius: 5px;
      }

      .horizontal {
        display: flex;
        align-items: center; /* Added */
      }

      .vertical {
        border: 1px solid lightgray;
        padding: 10px;
        margin: 20px;
        border-radius: 10px;
        background-color: white;
        width: 500px;
      }

      .vertical img {
        border-radius: 10px;
        width: 100%; /* Changed */
        height: auto; /* Changed */
      }

      .verticals {
        border: 1px solid lightgray;
        padding: 10px;
        margin: 20px;
        border-radius: 10px;
        background-color: white;
        width: 650px;
      }

      .verticals img {
        border-radius: 10px;
        width: 100%; /* Changed */
        height: auto; /* Changed */
      }

      .container {
        background-color: lightgray;
        border-radius: 10px;
      }

      .details {
        display: inline-flex;
        margin-left: 20px;
      }

      #map {
        width: 100%; /* Added */
        height: 450px; /* Added */
        border-radius: 10px; /* Added */
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); /* Added */
      }

      /* CSS */
      .button {
        align-items: center;
        appearance: none;
        background-color: #fff;
        border-radius: 24px;
        border-style: none;
        box-shadow: rgba(0, 0, 0, 0.2) 0 3px 5px -1px,
          rgba(0, 0, 0, 0.14) 0 6px 10px 0, rgba(0, 0, 0, 0.12) 0 1px 18px 0;
        box-sizing: border-box;
        color: #3c4043;
        cursor: pointer;
        display: inline-flex;
        fill: currentcolor;
        font-family: "Google Sans", Roboto, Arial, sans-serif;
        font-size: 14px;
        font-weight: 500;
        height: 48px;
        justify-content: center;
        letter-spacing: 0.25px;
        line-height: normal;
        max-width: 100%;
        overflow: visible;
        padding: 2px 24px;
        position: relative;
        text-align: center;
        text-transform: none;
        transition: box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),
          opacity 15ms linear 30ms,
          transform 270ms cubic-bezier(0, 0, 0.2, 1) 0ms;
        user-select: none;
        -webkit-user-select: none;
        touch-action: manipulation;
        width: auto;
        will-change: transform, opacity;
        z-index: 0;
      }

      .button {
        background: #f6f9fe;
        color: green;
      }

      .button:active {
        box-shadow: 0 4px 4px 0 rgb(60 64 67 / 30%),
          0 8px 12px 6px rgb(60 64 67 / 15%);
        outline: none;
      }

      .button:focus {
        outline: none;
        border: 2px solid #4285f4;
      }

      .button:not(:disabled) {
        box-shadow: rgba(60, 64, 67, 0.3) 0 1px 3px 0,
          rgba(60, 64, 67, 0.15) 0 4px 8px 3px;
      }

      .button:not(:disabled):hover {
        box-shadow: rgba(60, 64, 67, 0.3) 0 2px 3px 0,
          rgba(60, 64, 67, 0.15) 0 6px 10px 4px;
      }

      .button:not(:disabled):focus {
        box-shadow: rgba(60, 64, 67, 0.3) 0 1px 3px 0,
          rgba(60, 64, 67, 0.15) 0 4px 8px 3px;
      }

      .button:not(:disabled):active {
        box-shadow: rgba(60, 64, 67, 0.3) 0 4px 4px 0,
          rgba(60, 64, 67, 0.15) 0 8px 12px 6px;
      }

      .button:disabled {
        box-shadow: rgba(60, 64, 67, 0.3) 0 1px 3px 0,
          rgba(60, 64, 67, 0.15) 0 4px 8px 3px;
      }

      /* Add to your CSS */
      .dropdown-content {
        display: none;
        position: absolute;
        background-color: #f9f9f9;
        width: 100px;
        box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
        padding: 12px 16px;
        z-index: 1;
        border-radius: 10px;
        margin-top: 180px;
      }

      .dropdown-content a {
        color: black;
        padding: 12px 16px;
        text-decoration: none;
        display: block;
      }

      .dropdown-content a:hover {
        background-color: #f1f1f1;
      }
      .nav-con {
        padding: 5px;
        display: flex;
        align-items: center;
        border-radius: 10px;
        width: 320px;
        height: 20px;
        margin-left: 10px;
        margin-top: 10px;
      }
    </style>
    <script>
      var address = "Gajuwaka,Visakhapatnam, India"; // Updated address
      var accessToken =
        "pk.eyJ1IjoiY2hhbmRhbmFjaGFyaXRoYSIsImEiOiJjbHQzeHM5ZDMwMHB5Mmxsem1qMjdjczlyIn0.MQGCys-L_aAOQ3tbPCfiFQ"; // Update with your Mapbox access token

      // Use Mapbox Geocoding API to get coordinates from the address
      fetch(
        `https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(
          address
        )}.json?access_token=${accessToken}`
      )
        .then(function (response) {
          return response.json();
        })
        .then(function (data) {
          if (data.features && data.features.length > 0) {
            var coordinates = data.features[0].center;
            var lat = coordinates[1];
            var lon = coordinates[0];

            // Initialize the map
            var map = L.map("map").setView([lat, lon], 13); // Centered at the coordinates, with zoom level 13

            // Add a tile layer (base map) to the map
            L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
              attribution:
                'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',
              maxZoom: 18, // Maximum zoom level
            }).addTo(map);

            // Add a marker to the map
            var marker = L.marker([lat, lon]).addTo(map); // Placed at the coordinates
            marker.bindPopup("<b>" + address + "</b>").openPopup(); // Popup message with the address
          } else {
            console.error("No results found for the address:", address);
          }
        })
        .catch(function (error) {
          console.error("Error fetching geocoding data:", error);
        });
    </script>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-light">
      <div class="container">
        <!-- Company Name and Logo -->
        <a class="navbar-brand" href="#">
          <img src="{% static 'logo.png' %}" alt="Company Icon" />
          <span class="company-name">ZeroWaste</span>
        </a>
        <!-- Navbar Toggler -->
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Navbar Links -->
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item active">
              <a class="nav-link" href="#">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">History</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Feedback</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container" style="margin-top: 10px">
      <div class="horizontal">
        <div class="one">
          <p
            style="
              color: green;
              font-weight: bold;
              margin-top: 20px;
              margin-left: 30px;
            "
          >
            ORDER-IMAGE
          </p>

          <div class="vertical">
            <div
              style="
                background-color: lightgrey;
                border-radius: 10px;
                width: 480px;
                margin: 10px;
                margin-top: 0px;
              "
            >
              <div class="left">
                <img src="{{data.image}}" alt="Zero Waste Logo" />
                <p style="margin-left: 200px">&#9673; &#9673; &#9673;</p>
              </div>
            </div>
            <div class="nav-con">
              <div
                style="
                  border-radius: 20px;
                  background-color: white;
                  width: 170px;
                  height: 20px;
                  display: flex;
                  padding: 10px;
                  margin: 5px;
                "
              >
                RESTAURANT NAME
              </div>
              <p style="color: red; margin-top: 12px">
                &nbsp;&nbsp;&nbsp;&#9733;&#9733;&#9733;&#9733;
              </p>
            </div>
            <br />
            <div
              style="
                border-radius: 20px;
                background-color: white;
                width: 130px;
                height: 20px;
                display: inline;
                padding: 10px;
                margin-left: 20px;
              "
            >
              DELIVERY TYPE
            </div>
          </div>
        </div>
        <div class="two" style="margin-left: 50px">
          <p
            style="
              color: green;
              font-weight: bold;
              margin-top: 20px;
              margin-left: 30px;
            "
          >
            LOCATION
          </p>

          <div class="verticals">
            <div id="map"></div>
            <hr />
            <button class="button">CANCEL ORDER</button>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"
  ></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
</html>
